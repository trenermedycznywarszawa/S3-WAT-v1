<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a4d2e">
    <meta name="description" content="S3 WAT Training Hub - Profesjonalna aplikacja do trackingu trening√≥w przygotowujƒÖcych do selekcji jednostek specjalnych GROM, JWK, Formoza">
    <title>S3 WAT Training Hub</title>
    <link rel="manifest" href="data:application/manifest+json,%7B%22name%22%3A%22S3%20WAT%20Training%20Hub%22%2C%22short_name%22%3A%22S3%20Training%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%231a4d2e%22%2C%22theme_color%22%3A%22%231a4d2e%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%253Csvg%2520xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%2520viewBox%3D%270%25200%2520192%2520192%27%253E%253Crect%2520fill%3D%27%25231a4d2e%27%2520width%3D%27192%27%2520height%3D%27192%27%2F%253E%253Ctext%2520x%3D%2750%2525%27%2520y%3D%2750%2525%27%2520font-size%3D%27100%27%2520fill%3D%27%2523d32f2f%27%2520text-anchor%3D%27middle%27%2520dominant-baseline%3D%27central%27%2520font-weight%3D%27bold%27%253ES3%253C%2Ftext%253E%253C%2Fsvg%253E%22%2C%22sizes%22%3A%22192x192%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%7D%5D%7D">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a4d2e;
            --primary-light: #2d7a3f;
            --primary-dark: #0d2617;
            --accent: #d32f2f;
            --accent-light: #ff5252;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --dark-bg: #0d1b2a;
            --light-bg: #f5f5f5;
            --card-bg: #ffffff;
            --text-dark: #1a1a1a;
            --text-light: #ffffff;
            --border-color: #ddd;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body.dark-mode {
            background: var(--dark-bg);
            color: var(--text-light);
        }

        body.dark-mode .card {
            background: #1a2a3a;
            border: 1px solid #2a3a4a;
        }

        body.dark-mode .input,
        body.dark-mode textarea,
        body.dark-mode select {
            background: #263a4a;
            color: var(--text-light);
            border-color: #3a4a5a;
        }

        body.dark-mode nav {
            background: #1a2a3a;
            border-bottom-color: var(--accent);
        }

        body.dark-mode nav button {
            color: var(--text-light);
        }

        body.dark-mode tbody tr:hover {
            background: #263a4a;
        }

        body.dark-mode .exercise-card {
            background: #263a4a;
            border-left-color: var(--accent);
        }

        body.dark-mode .modal-content {
            background: #1a2a3a;
        }

        #app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            background: white;
            border: 3px solid var(--accent);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: var(--accent);
            font-size: 22px;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .header-title h1 {
            font-size: 1.3rem;
            margin: 0;
            font-weight: 700;
        }

        .header-title p {
            font-size: 0.75rem;
            opacity: 0.9;
            margin: 0;
        }

        .header-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .header-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .header-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        main {
            flex: 1;
            padding: 1rem;
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        nav {
            background: white;
            border-bottom: 3px solid var(--primary);
            display: flex;
            gap: 0.5rem;
            overflow-x: auto;
            padding: 0 1rem;
            margin: -1rem -1rem 1rem -1rem;
            position: sticky;
            top: 66px;
            z-index: 99;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        nav button {
            background: none;
            border: none;
            padding: 1rem 0.75rem;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
            margin-bottom: -3px;
        }

        nav button.active {
            border-bottom: 3px solid var(--accent);
            color: var(--accent);
        }

        nav button:hover {
            color: var(--accent);
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
        }

        body.dark-mode .card h2 {
            color: var(--accent-light);
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 77, 46, 0.3);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.3);
        }

        .btn-secondary {
            background: var(--border-color);
            color: var(--text-dark);
        }

        .btn-secondary:hover {
            background: #ccc;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        .btn-block {
            width: 100%;
            margin-bottom: 0.75rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        body.dark-mode label {
            color: var(--text-light);
        }

        .input,
        textarea,
        select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
        }

        .input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-box {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .stat-box:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .stat-box h3 {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-box .value {
            font-size: 2.2rem;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
        }

        .stat-box.accent {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
        }

        .stat-box.success {
            background: linear-gradient(135deg, var(--success) 0%, #2ecc71 100%);
        }

        .progress-bar {
            background: rgba(0,0,0,0.1);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            transition: width 0.5s ease;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            text-align: center;
            color: var(--accent);
            font-family: 'Courier New', 'Roboto Mono', monospace;
            margin: 2rem 0;
            font-variant-numeric: tabular-nums;
            letter-spacing: 2px;
        }

        .timer-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }

        .timer-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            margin: 0;
            color: var(--primary);
            font-size: 1.5rem;
        }

        body.dark-mode .modal-header h2 {
            color: var(--accent-light);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-dark);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(0,0,0,0.1);
        }

        body.dark-mode .modal-close {
            color: var(--text-light);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        thead {
            background: var(--primary);
            color: white;
        }

        body.dark-mode thead {
            background: var(--accent);
        }

        th,
        td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        tbody tr:hover {
            background: rgba(26, 77, 46, 0.05);
        }

        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .exercise-card {
            background: var(--card-bg);
            border-left: 4px solid var(--accent);
            padding: 1.25rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
        }

        .exercise-card:hover {
            box-shadow: 0 6px 20px rgba(211, 47, 47, 0.15);
            transform: translateY(-4px);
        }

        .exercise-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        body.dark-mode .exercise-card h3 {
            color: var(--accent-light);
        }

        .exercise-card .category {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .norm-badge {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 0.25rem 0.25rem 0.25rem 0;
            font-weight: 600;
        }

        .workout-item {
            background: var(--card-bg);
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .workout-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateX(4px);
        }

        body.dark-mode .workout-item {
            background: #263a4a;
        }

        .workout-item h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        body.dark-mode .workout-item h3 {
            color: var(--accent-light);
        }

        .workout-item .date {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        body.dark-mode .workout-item .date {
            color: #aaa;
        }

        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 6px 20px rgba(211, 47, 47, 0.4);
            z-index: 50;
            transition: all 0.3s;
        }

        .fab:hover {
            background: var(--accent-light);
            transform: scale(1.15) rotate(90deg);
        }

        .hidden {
            display: none;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(39, 174, 96, 0.1);
            border-left: 4px solid var(--success);
            color: var(--success);
        }

        .alert-danger {
            background: rgba(231, 76, 60, 0.1);
            border-left: 4px solid var(--danger);
            color: var(--danger);
        }

        .alert-warning {
            background: rgba(243, 156, 18, 0.1);
            border-left: 4px solid var(--warning);
            color: var(--warning);
        }

        @media (max-width: 768px) {
            header {
                padding: 0.75rem;
            }

            .header-title h1 {
                font-size: 1rem;
            }

            .header-title p {
                font-size: 0.7rem;
            }

            .logo-img {
                width: 42px;
                height: 42px;
                font-size: 18px;
            }

            .timer-display {
                font-size: 2.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .exercise-grid {
                grid-template-columns: 1fr;
            }

            nav {
                top: 58px;
            }

            .card {
                padding: 1rem;
            }

            .modal-content {
                padding: 1.5rem;
                width: 95%;
            }

            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 56px;
                height: 56px;
            }
        }

        .rating {
            display: flex;
            gap: 0.25rem;
            font-size: 1.5rem;
        }

        .star {
            cursor: pointer;
            color: #ddd;
            transition: all 0.2s;
        }

        .star.filled {
            color: #f39c12;
        }

        .star:hover {
            transform: scale(1.2);
        }

        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #999;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .calculator-result {
            background: var(--primary);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin-top: 1.5rem;
        }

        .calculator-result .score {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .calculator-result .label {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        body.dark-mode .calculator-result {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
        }

        .benchmark-group {
            margin-bottom: 2rem;
        }

        .benchmark-group h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent);
        }

        body.dark-mode .benchmark-group h3 {
            color: var(--accent-light);
        }

        .timer-mode-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .timer-mode-btn {
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-align: center;
        }

        .timer-mode-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .timer-mode-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        body.dark-mode .timer-mode-btn {
            background: #263a4a;
            border-color: #3a4a5a;
            color: var(--text-light);
        }

        body.dark-mode .timer-mode-btn.active {
            background: var(--accent);
            border-color: var(--accent);
        }
    </style>
</head>
<body>
    <div id="app">
        <header>
            <div class="header-content">
                <div class="logo-img">S3</div>
                <div class="header-title">
                    <h1>S3 WAT Training Hub</h1>
                    <p>Przygotowanie do jednostek specjalnych</p>
                </div>
            </div>
            <div class="header-controls">
                <button class="header-btn" onclick="toggleDarkMode()" title="Prze≈ÇƒÖcz tryb">üåì</button>
                <button class="header-btn" onclick="showSettings()" title="Ustawienia">‚öôÔ∏è</button>
            </div>
        </header>

        <main>
            <nav>
                <button class="active" onclick="switchTab('dashboard')">üìä Dashboard</button>
                <button onclick="switchTab('exercises')">üí™ ƒÜwiczenia</button>
                <button onclick="switchTab('timer')">‚è±Ô∏è Timer</button>
                <button onclick="switchTab('workouts')">üìù Treningi</button>
                <button onclick="switchTab('calculator')">üéØ Kalkulator</button>
                <button onclick="switchTab('benchmarks')">üèÖ Normy</button>
                <button onclick="switchTab('plans')">üìã Plany</button>
            </nav>

            <div id="dashboard" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-box accent">
                        <h3>Treningi (7 dni)</h3>
                        <div class="value" id="weekWorkouts">0</div>
                    </div>
                    <div class="stat-box">
                        <h3>Treningi (30 dni)</h3>
                        <div class="value" id="monthWorkouts">0</div>
                    </div>
                    <div class="stat-box success">
                        <h3>Seria treningowa</h3>
                        <div class="value" id="streak">0</div>
                    </div>
                    <div class="stat-box">
                        <h3>≈ÅƒÖcznie trening√≥w</h3>
                        <div class="value" id="totalWorkouts">0</div>
                    </div>
                </div>

                <div class="card">
                    <h2>üìà Ostatnie treningi</h2>
                    <div id="recentWorkouts"></div>
                </div>

                <div class="card">
                    <h2>üéØ Postƒôp w normach GROM</h2>
                    <div id="normProgress"></div>
                </div>
            </div>

            <div id="exercises" class="tab-content">
                <div class="card">
                    <h2>üí™ Biblioteka ƒáwicze≈Ñ</h2>
                    <div class="form-group">
                        <input type="text" class="input" id="exerciseSearch" placeholder="üîç Szukaj ƒáwiczenia..." oninput="filterExercises()">
                    </div>
                    <div class="form-group">
                        <select class="input" id="categoryFilter" onchange="filterExercises()">
                            <option value="">Wszystkie kategorie</option>
                            <option value="Wytrzyma≈Ço≈õƒá">Wytrzyma≈Ço≈õƒá</option>
                            <option value="Si≈Ça">Si≈Ça</option>
                            <option value="Core">Core</option>
                            <option value="Motoryka">Motoryka</option>
                        </select>
                    </div>
                    <div class="exercise-grid" id="exerciseList"></div>
                </div>
            </div>

            <div id="timer" class="tab-content">
                <div class="card">
                    <h2>‚è±Ô∏è Profesjonalny Timer</h2>
                    
                    <div class="timer-mode-selector">
                        <button class="timer-mode-btn active" onclick="selectTimerMode('stopwatch')">‚è±Ô∏è Stoper</button>
                        <button class="timer-mode-btn" onclick="selectTimerMode('fortime')">üèÉ For Time</button>
                        <button class="timer-mode-btn" onclick="selectTimerMode('emom')">üîÑ EMOM</button>
                        <button class="timer-mode-btn" onclick="selectTimerMode('tabata')">‚ö° Tabata</button>
                        <button class="timer-mode-btn" onclick="selectTimerMode('amrap')">‚ôæÔ∏è AMRAP</button>
                    </div>

                    <div id="timerSettings"></div>
                    
                    <div class="timer-display" id="timerDisplay">00:00:00</div>
                    
                    <div class="timer-controls">
                        <button class="btn btn-accent" id="timerStartBtn" onclick="startTimer()">‚ñ∂Ô∏è Start</button>
                        <button class="btn btn-secondary" onclick="pauseTimer()">‚è∏Ô∏è Pauza</button>
                        <button class="btn btn-secondary" onclick="resetTimer()">üîÑ Reset</button>
                    </div>

                    <div id="timerLaps"></div>
                </div>
            </div>

            <div id="workouts" class="tab-content">
                <div class="card">
                    <h2>üìù Historia trening√≥w</h2>
                    <div id="workoutList"></div>
                </div>
            </div>

            <div id="calculator" class="tab-content">
                <div class="card">
                    <h2>üéØ Kalkulator Norm Jednostek Specjalnych</h2>
                    <div class="form-group">
                        <label>Wybierz jednostkƒô:</label>
                        <select class="input" id="unitSelect">
                            <option value="grom">GROM</option>
                            <option value="jwk">JWK Lubliniec</option>
                            <option value="formoza">Formoza</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>P≈Çeƒá:</label>
                        <select class="input" id="genderSelect">
                            <option value="M">Mƒô≈ºczyzna</option>
                            <option value="K">Kobieta</option>
                        </select>
                    </div>
                    
                    <h3 style="margin-top: 1.5rem; color: var(--primary);">Wprowad≈∫ swoje wyniki:</h3>
                    
                    <div class="form-group">
                        <label>Bieg 3000m (min:sek):</label>
                        <input type="text" class="input" id="run3000" placeholder="np. 13:30">
                    </div>
                    
                    <div class="form-group">
                        <label>PodciƒÖganie na drƒÖ≈ºku (powt√≥rzenia):</label>
                        <input type="number" class="input" id="pullups" placeholder="np. 12">
                    </div>
                    
                    <div class="form-group">
                        <label>Sk≈Çony tu≈Çowia 2min (powt√≥rzenia):</label>
                        <input type="number" class="input" id="situps" placeholder="np. 70">
                    </div>
                    
                    <div class="form-group">
                        <label>Pompki (powt√≥rzenia):</label>
                        <input type="number" class="input" id="pushups" placeholder="np. 50">
                    </div>
                    
                    <div class="form-group">
                        <label>Bieg wahad≈Çowy 10√ó10m (sekundy):</label>
                        <input type="number" step="0.1" class="input" id="shuttle" placeholder="np. 29.5">
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="calculateNorms()">üéØ Oblicz wynik</button>
                    
                    <div id="calculatorResult"></div>
                </div>
            </div>

            <div id="benchmarks" class="tab-content">
                <div class="card">
                    <h2>üèÖ Normy i benchmarki</h2>
                    <div id="benchmarksList"></div>
                </div>
            </div>

            <div id="plans" class="tab-content">
                <div class="card">
                    <h2>üìã Generator plan√≥w treningowych</h2>
                    
                    <div class="form-group">
                        <label>Cel przygotowania:</label>
                        <select class="input" id="planGoal">
                            <option value="grom">Selekcja GROM</option>
                            <option value="jwk">Selekcja JWK</option>
                            <option value="formoza">Selekcja Formoza</option>
                            <option value="general">Poprawa og√≥lnej sprawno≈õci</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>D≈Çugo≈õƒá planu:</label>
                        <select class="input" id="planDuration">
                            <option value="4">4 tygodnie</option>
                            <option value="8">8 tygodni</option>
                            <option value="12">12 tygodni</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Dni treningowe w tygodniu:</label>
                        <select class="input" id="planDays">
                            <option value="3">3 dni</option>
                            <option value="4">4 dni</option>
                            <option value="5">5 dni</option>
                            <option value="6">6 dni</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Dostƒôpny sprzƒôt:</label>
                        <select class="input" id="planEquipment">
                            <option value="minimal">Minimal (ciƒô≈ºar w≈Çasny + drƒÖ≈ºek)</option>
                            <option value="standard">Standard (drƒÖ≈ºek, porƒôcza, pi≈Çka lekarska)</option>
                            <option value="full">Full gym (si≈Çownia)</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary btn-block" onclick="generatePlan()">üéØ Generuj plan treningowy</button>
                    
                    <div id="generatedPlan"></div>
                </div>
            </div>
        </main>

        <button class="fab" onclick="showAddWorkout()" title="Dodaj trening">+</button>
    </div>

    <!-- Modal: Dodaj trening -->
    <div id="addWorkoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Dodaj trening</h2>
                <button class="modal-close" onclick="closeModal('addWorkoutModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label>Data i godzina:</label>
                <input type="datetime-local" class="input" id="workoutDateTime">
            </div>
            
            <div class="form-group">
                <label>Typ treningu:</label>
                <select class="input" id="workoutType">
                    <option value="Si≈Ça">Si≈Ça</option>
                    <option value="Wytrzyma≈Ço≈õƒá">Wytrzyma≈Ço≈õƒá</option>
                    <option value="Mieszany">Mieszany</option>
                    <option value="Mobilno≈õƒá">Mobilno≈õƒá</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Opis treningu:</label>
                <textarea class="input" id="workoutDescription" placeholder="Opisz wykonane ƒáwiczenia i wyniki..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Samopoczucie:</label>
                <div class="rating" id="workoutRating">
                    <span class="star" onclick="setRating(1)">‚òÖ</span>
                    <span class="star" onclick="setRating(2)">‚òÖ</span>
                    <span class="star" onclick="setRating(3)">‚òÖ</span>
                    <span class="star" onclick="setRating(4)">‚òÖ</span>
                    <span class="star" onclick="setRating(5)">‚òÖ</span>
                </div>
            </div>
            
            <div class="form-group">
                <label>Notatki:</label>
                <textarea class="input" id="workoutNotes" placeholder="Dodatkowe notatki..."></textarea>
            </div>
            
            <button class="btn btn-accent btn-block" onclick="saveWorkout()">üíæ Zapisz trening</button>
        </div>
    </div>

    <!-- Modal: Szczeg√≥≈Çy ƒáwiczenia -->
    <div id="exerciseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="exerciseModalTitle">ƒÜwiczenie</h2>
                <button class="modal-close" onclick="closeModal('exerciseModal')">&times;</button>
            </div>
            <div id="exerciseModalContent"></div>
        </div>
    </div>

    <!-- Modal: Ustawienia -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Ustawienia</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label>Imiƒô:</label>
                <input type="text" class="input" id="userName" placeholder="Twoje imiƒô">
            </div>
            
            <div class="form-group">
                <label>P≈Çeƒá:</label>
                <select class="input" id="userGender">
                    <option value="M">Mƒô≈ºczyzna</option>
                    <option value="K">Kobieta</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>Wiek:</label>
                <input type="number" class="input" id="userAge" placeholder="lat">
            </div>
            
            <div class="form-group">
                <label>Wzrost (cm):</label>
                <input type="number" class="input" id="userHeight" placeholder="cm">
            </div>
            
            <div class="form-group">
                <label>Waga (kg):</label>
                <input type="number" class="input" id="userWeight" placeholder="kg">
            </div>
            
            <div class="form-group">
                <label>Cel docelowy:</label>
                <select class="input" id="userGoal">
                    <option value="grom">GROM</option>
                    <option value="jwk">JWK</option>
                    <option value="formoza">Formoza</option>
                    <option value="other">Og√≥lne przygotowanie</option>
                </select>
            </div>
            
            <button class="btn btn-primary btn-block" onclick="saveSettings()">üíæ Zapisz ustawienia</button>
            
            <h3 style="margin-top: 2rem; color: var(--primary);">ZarzƒÖdzanie danymi</h3>
            
            <button class="btn btn-secondary btn-block" onclick="exportData()">üì• Eksportuj dane (JSON)</button>
            <button class="btn btn-secondary btn-block" onclick="document.getElementById('importFile').click()">üì§ Importuj dane</button>
            <input type="file" id="importFile" accept=".json" style="display: none" onchange="importData(event)">
            <button class="btn btn-accent btn-block" onclick="resetApp()">üîÑ Resetuj aplikacjƒô</button>
        </div>
    </div>

    <script>
        // ==================== INITIALIZATION ====================
        
        const exercises = [
            {
                name: "Bieg 3000m",
                category: "Wytrzyma≈Ço≈õƒá",
                description: "Podstawowy test wytrzyma≈Ço≈õci tlenowej. Bieg wykonywany na bie≈ºni lub terenie p≈Çaskim.",
                norms: {
                    grom_M: "< 13:40",
                    grom_K: "< 15:30",
                    jwk_M: "< 14:00",
                    jwk_K: "< 16:00"
                },
                tips: "Trenuj interwa≈Çy 400m-1000m. Pracuj nad tempem. Dwa razy w tygodniu: d≈Çugi bieg (5-10km) + interwa≈Çy."
            },
            {
                name: "PodciƒÖganie na drƒÖ≈ºku",
                category: "Si≈Ça",
                description: "PodciƒÖganie nachwytem, broda ponad drƒÖ≈ºkiem. Ruchy kontrolowane bez wymach√≥w.",
                norms: {
                    grom_M: "‚â• 9",
                    grom_K: "‚â• 5",
                    jwk_M: "‚â• 8",
                    jwk_K: "‚â• 4"
                },
                tips: "Trenuj 3-4 razy w tygodniu. R√≥b negatywy (spuszczanie siƒô), Australian pull-ups, zwieszanie na drƒÖ≈ºku."
            },
            {
                name: "Sk≈Çony tu≈Çowia 2min",
                category: "Core",
                description: "Klasyczne brzuszki (sit-ups) z unoszeniem ca≈Çego tu≈Çowia. Rƒôce za g≈ÇowƒÖ.",
                norms: {
                    grom_M: "‚â• 65",
                    grom_K: "‚â• 55",
                    jwk_M: "‚â• 60",
                    jwk_K: "‚â• 50"
                },
                tips: "Trenuj w seriach po 30-60 sekund. Dodaj planki (statyczne i dynamiczne) oraz hollow holds."
            },
            {
                name: "Pompki ciƒÖg≈Çe",
                category: "Si≈Ça",
                description: "Pompki z pe≈Çnym zakresem ruchu. Klatka dotyka pod≈Ço≈ºa, ≈Çokcie blisko cia≈Ça.",
                norms: {
                    grom_M: "‚â• 48",
                    grom_K: "‚â• 30",
                    jwk_M: "‚â• 45",
                    jwk_K: "‚â• 28"
                },
                tips: "Trenuj r√≥≈ºne warianty: diamentowe, szerokie, z kla≈õniƒôciem. R√≥b serie do maksimum 3-4x/tydzie≈Ñ."
            },
            {
                name: "Bieg wahad≈Çowy 10√ó10m",
                category: "Motoryka",
                description: "Sprint tam i z powrotem na dystansie 10m (10 zmian kierunku). Test szybko≈õci i zwrotno≈õci.",
                norms: {
                    grom_M: "< 30.8",
                    grom_K: "< 32.3",
                    jwk_M: "< 31.5",
                    jwk_K: "< 33.0"
                },
                tips: "Trenuj sprinty 10-30m, zmienne kierunki, skoki boczne. Wzmacniaj nogi (przysiady, wyskoki)."
            },
            {
                name: "Wios≈Çowanie 500m",
                category: "Wytrzyma≈Ço≈õƒá",
                description: "Test na ergometrze wio≈õlarski (Concept2). Maksymalna szybko≈õƒá na 500m.",
                norms: {
                    grom_M: "< 1:50",
                    grom_K: "< 2:00",
                    jwk_M: "< 1:55",
                    jwk_K: "< 2:05"
                },
                tips: "Technika to podstawa. Potƒôga z n√≥g, napiƒôcie core, ciƒÖgniƒôcie rƒôkami. Trenuj interwa≈Çy 2x500m, 4x250m."
            },
            {
                name: "Uginanie na porƒôczach",
                category: "Si≈Ça",
                description: "Dipy na porƒôczach r√≥wnoleg≈Çych. Pe≈Çen zakres ruchu (90¬∞ w ≈Çokciu), kontrola.",
                norms: {
                    grom_M: "‚â• 10",
                    grom_K: "‚â• 6",
                    jwk_M: "‚â• 9",
                    jwk_K: "‚â• 5"
                },
                tips: "Wzmacniaj triceps i klatkƒô. R√≥b negatywy, ƒáwicz na TRX, dodaj obciƒÖ≈ºenia gdy opanujesz czysty ruch."
            },
            {
                name: "Przysiady z pi≈ÇkƒÖ lekarskƒÖ",
                category: "Si≈Ça",
                description: "G≈Çƒôbokie przysiady z pi≈ÇkƒÖ 5-10kg trzymanƒÖ przy klatce. Tempo kontrolowane.",
                norms: {
                    grom_M: "‚â• 40 (2min)",
                    grom_K: "‚â• 35 (2min)"
                },
                tips: "G≈Çƒôboko≈õƒá poni≈ºej r√≥wnoleg≈Çej. Pracuj nad mobilno≈õciƒÖ kostek i bioder. Trenuj 3x/tydzie≈Ñ."
            },
            {
                name: "Plank statyczny",
                category: "Core",
                description: "Deska na przedramionach. Cia≈Ço w linii prostej, napiƒôty core i po≈õladki.",
                norms: {
                    grom_M: "‚â• 2:00",
                    grom_K: "‚â• 1:30"
                },
                tips: "Trenuj codziennie, zwiƒôkszaj czas co tydzie≈Ñ. Dodaj warianty: boczne, na jednej rƒôce, z uniesieniem nogi."
            },
            {
                name: "Burpees",
                category: "Motoryka",
                description: "Po≈ÇƒÖczenie przysiad-pompka-wyskok. Dynamiczne ƒáwiczenie full-body.",
                norms: {
                    grom_M: "‚â• 20 (1min)",
                    grom_K: "‚â• 15 (1min)"
                },
                tips: "Trenuj w Tabata (20s work/10s rest). Dbaj o technikƒô nawet przy zmƒôczeniu."
            },
            {
                name: "P≈Çywanie 100m dowolnym stylem",
                category: "Wytrzyma≈Ço≈õƒá",
                description: "Test p≈Çywacki - 100m stylem dowolnym (zwykle kraul). Czas maksymalny.",
                norms: {
                    grom_M: "< 1:45",
                    grom_K: "< 2:00"
                },
                tips: "Pracuj nad technikƒÖ z trenerem. Trenuj interwa≈Çy 25m/50m. 2-3 sesje p≈Çywackie/tydzie≈Ñ."
            },
            {
                name: "Marsze ruck (z plecakiem)",
                category: "Wytrzyma≈Ço≈õƒá",
                description: "Marsz z plecakiem 15-25kg na dystans 10-20km. Tempo 5-6 km/h.",
                norms: {
                    grom_M: "20km < 4h (plecak 20kg)",
                    jwk_M: "15km < 3h (plecak 15kg)"
                },
                tips: "Buduj dystans stopniowo. Zadbaj o obuwie (break-in). Wzmacniaj nogi i core. Trenuj raz w tygodniu."
            },
            {
                name: "Martwy ciƒÖg",
                category: "Si≈Ça",
                description: "Klasyczny deadlift ze sztangƒÖ. Technika olimpijska lub sumo.",
                norms: {
                    grom_M: "‚â• 1.5x waga cia≈Ça",
                    jwk_M: "‚â• 1.3x waga cia≈Ça"
                },
                tips: "Fundamentalne ƒáwiczenie si≈Çowe. Pracuj z trenerem nad technikƒÖ. 1-2 razy/tydzie≈Ñ, ciƒô≈ºkie serie po 3-5 powt√≥rze≈Ñ."
            },
            {
                name: "Przysiad ze sztangƒÖ",
                category: "Si≈Ça",
                description: "Back squat - przysiad z gryfem na plecach. G≈Çƒôboko≈õƒá poni≈ºej r√≥wnoleg≈Çej.",
                norms: {
                    grom_M: "‚â• 1.3x waga cia≈Ça",
                    jwk_M: "‚â• 1.1x waga cia≈Ça"
                },
                tips: "Kluczowe dla si≈Çy n√≥g. Pracuj nad mobilno≈õciƒÖ. Trenuj 2x/tydzie≈Ñ, r√≥≈ºne zakresy powt√≥rze≈Ñ (5√ó5, 3√ó8)."
            },
            {
                name: "Wyciskanie sztangi le≈ºƒÖc",
                category: "Si≈Ça",
                description: "Bench press - klasyczne wyciskanie na ≈Çawce p≈Çaskiej.",
                norms: {
                    grom_M: "‚â• 1.0x waga cia≈Ça",
                    jwk_M: "‚â• 0.8x waga cia≈Ça"
                },
                tips: "Buduj si≈Çƒô klatki i triceps√≥w. 2x/tydzie≈Ñ, r√≥≈ºne kƒÖty (p≈Çaska, sko≈õna). Serie 5√ó5 lub 3√ó8."
            },
            {
                name: "Farmer's Walk",
                category: "Si≈Ça",
                description: "Ch√≥d farmerski - noszenie ciƒô≈ºkich obciƒÖ≈ºe≈Ñ w obu rƒôkach na dystans.",
                norms: {
                    grom_M: "50m z 40kg w ka≈ºdej rƒôce",
                    jwk_M: "50m z 30kg w ka≈ºdej rƒôce"
                },
                tips: "≈öwietny na grip strength i core. Trzymaj wyprostowanƒÖ postawƒô. 1-2x/tydzie≈Ñ na ko≈Ñcu treningu."
            },
            {
                name: "Box jumps (wyskoki na skrzyniƒô)",
                category: "Motoryka",
                description: "Dynamiczne wyskoki obuno≈º na skrzyniƒô 60-75cm.",
                norms: {
                    grom_M: "‚â• 75cm wysoko≈õƒá",
                    jwk_M: "‚â• 65cm wysoko≈õƒá"
                },
                tips: "Buduj moc n√≥g. LƒÖduj miƒôkko, kontroluj zej≈õcie. 2-3x/tydzie≈Ñ, 5 serii po 5-10 wyskok√≥w."
            },
            {
                name: "Skakanka (double-unders)",
                category: "Motoryka",
                description: "Skakanie przez skakankƒÖ - podw√≥jne obroty (double-unders).",
                norms: {
                    grom_M: "‚â• 50 double-unders nieprzerwanie",
                    jwk_M: "‚â• 30 double-unders nieprzerwanie"
                },
                tips: "Praktykuj codziennie 5-10 minut. Zacznij od single-unders, buduj rytm. Skakanka to ≈õwietna rozgrzewka."
            },
            {
                name: "Muscle-ups",
                category: "Si≈Ça",
                description: "Zaawansowane ƒáwiczenie ≈ÇƒÖczƒÖce podciƒÖganie i dipy - przej≈õcie nad drƒÖ≈ºek.",
                norms: {
                    grom_M: "‚â• 5",
                    jwk_M: "‚â• 3"
                },
                tips: "Wymagane: 15+ pull-ups + 20+ dips. Trenuj kipping muscle-up, potem strict. False grip pomaga."
            },
            {
                name: "Handstand push-ups",
                category: "Si≈Ça",
                description: "Pompki w staniu na rƒôkach (przy ≈õcianie lub swobodnie).",
                norms: {
                    grom_M: "‚â• 10",
                    jwk_M: "‚â• 7"
                },
                tips: "Zacznij od pompek pike, potem przy ≈õcianie. Buduj stabilno≈õƒá ramion. 2-3x/tydzie≈Ñ."
            },
            {
                name: "L-sit na porƒôczach",
                category: "Core",
                description: "Trzymanie pozycji z nogami w kƒÖcie 90¬∞ na porƒôczach lub drƒÖ≈ºku.",
                norms: {
                    grom_M: "‚â• 30s",
                    jwk_M: "‚â• 20s"
                },
                tips: "Buduj si≈Çƒô core i hip flexors. Zacznij od tuck L-sit, potem jedna noga, potem obie proste."
            },
            {
                name: "Rope climb (wspinaczka po linie)",
                category: "Si≈Ça",
                description: "Wspinaczka po linie 5-7m bez pomocy n√≥g (tylko rƒôce).",
                norms: {
                    grom_M: "‚â• 2 wej≈õcia bez n√≥g",
                    jwk_M: "‚â• 1 wej≈õcie bez n√≥g"
                },
                tips: "Kluczowy grip strength i pull power. Zacznij z u≈ºyciem n√≥g, potem trenuj z blokiem miƒôdzy kolanami."
            },
            {
                name: "Kettlebell swings",
                category: "Motoryka",
                description: "Dynamiczne machanie kettlebell (16-24kg) z eksplozjƒÖ bioder.",
                norms: {
                    grom_M: "100 powt√≥rze≈Ñ < 5min (24kg)",
                    jwk_M: "75 powt√≥rze≈Ñ < 5min (20kg)"
                },
                tips: "Napƒôd z bioder, nie z ramion. Trzymaj plecy proste. ≈öwietne na conditioning. 2-3x/tydzie≈Ñ."
            },
            {
                name: "Sprint 100m",
                category: "Motoryka",
                description: "Maksymalny sprint na dystansie 100m. Test czystej szybko≈õci.",
                norms: {
                    grom_M: "< 14.5s",
                    grom_K: "< 16.5s"
                },
                tips: "Pracuj nad startem i technikƒÖ biegu. Sprinty 20-60m z pe≈Çnym odpoczynkiem. 2x/tydzie≈Ñ."
            },
            {
                name: "Hollow body hold",
                category: "Core",
                description: "Pozycja na plecach z uniesionym tu≈Çowiem i nogami, rƒôce za g≈ÇowƒÖ.",
                norms: {
                    grom_M: "‚â• 60s",
                    jwk_M: "‚â• 45s"
                },
                tips: "Podstawa gimnastyki. Dolna czƒô≈õƒá plec√≥w przylega do pod≈Ço≈ºa. Trenuj codziennie 3-5 serii."
            },
            {
                name: "Wall balls",
                category: "Motoryka",
                description: "Rzuty pi≈ÇkƒÖ lekarskƒÖ (9kg M, 6kg K) w cel na wysoko≈õci 3m. ≈ÅƒÖczenie przysiadu z rzutem.",
                norms: {
                    grom_M: "‚â• 30 powt√≥rze≈Ñ nieprzerwanie",
                    jwk_M: "‚â• 25 powt√≥rze≈Ñ nieprzerwanie"
                },
                tips: "Wykorzystuj impet z przysiadu. Tempo r√≥wnomierne. CrossFit benchmark: 150 wall balls w 'Karen'."
            },
            {
                name: "Thrusters (wypychanie sztangi)",
                category: "Motoryka",
                description: "Po≈ÇƒÖczenie front squat i wyciskania nad g≈Çowƒô. ƒÜwiczenie full-body.",
                norms: {
                    grom_M: "20 powt√≥rze≈Ñ z 50kg",
                    jwk_M: "20 powt√≥rze≈Ñ z 40kg"
                },
                tips: "P≈Çynny ruch bez przerwy miƒôdzy przysiadem a wyciskaniem. Kluczowe w WOD-ach typu 'Fran'."
            },
            {
                name: "Running intervals 400m",
                category: "Wytrzyma≈Ço≈õƒá",
                description: "Interwa≈Çy biegowe 400m z odpoczynkiem 1:1 lub 2:1.",
                norms: {
                    grom_M: "8x400m @ 1:30 pace",
                    jwk_M: "6x400m @ 1:35 pace"
                },
                tips: "Klasyczny trening HIIT. Buduje VO2max. Raz w tygodniu, po rozgrzewce 2km jogging."
            },
            {
                name: "Turkish Get-Up",
                category: "Si≈Ça",
                description: "Z≈Ço≈ºone ƒáwiczenie z kettlebell - wstawanie z le≈ºenia do stania z ciƒô≈ºarem nad g≈ÇowƒÖ.",
                norms: {
                    grom_M: "5 TGU z 24kg ka≈ºdƒÖ stronƒÖ",
                    jwk_M: "3 TGU z 20kg ka≈ºdƒÖ stronƒÖ"
                },
                tips: "ƒÜwiczenie mobilno≈õci, stabilno≈õci i si≈Çy. Ucz siƒô ruch po ruchu. 1-2x/tydzie≈Ñ."
            },
            {
                name: "Sled push/pull (sanie treningowe)",
                category: "Si≈Ça",
                description: "Pchanie lub ciƒÖgniƒôcie obciƒÖ≈ºonych sani na dystans 20-50m.",
                norms: {
                    grom_M: "50m push z 100kg obciƒÖ≈ºeniem",
                    jwk_M: "50m push z 80kg obciƒÖ≈ºeniem"
                },
                tips: "≈öwietne na nogi i conditioning bez obciƒÖ≈ºania staw√≥w. Trenuj ciƒô≈ºko 1-2x/tydzie≈Ñ."
            },
            {
                name: "Battle ropes",
                category: "Motoryka",
                description: "Dynamiczne machanie grubymi linami (15m d≈Çugo≈õci) przez zadany czas.",
                norms: {
                    grom_M: "‚â• 3min ciƒÖg≈Çe machanie",
                    jwk_M: "‚â• 2min ciƒÖg≈Çe machanie"
                },
                tips: "≈öwietne conditioning i grip strength. R√≥b w interwa≈Çach 30s/30s. Ko≈Ñc√≥wka treningu."
            }
        ];

        let workouts = [];
        let userSettings = {
            name: "",
            gender: "M",
            age: 25,
            height: 180,
            weight: 80,
            goal: "grom"
        };
        let currentWorkoutRating = 0;
        let currentTimerMode = 'stopwatch';
        let timerInterval = null;
        let timerSeconds = 0;
        let timerPaused = false;
        let timerLaps = [];

        // Load data from localStorage
        function loadData() {
            const savedWorkouts = localStorage.getItem('s3wat_workouts');
            const savedSettings = localStorage.getItem('s3wat_settings');
            
            if (savedWorkouts) {
                workouts = JSON.parse(savedWorkouts);
            }
            
            if (savedSettings) {
                userSettings = JSON.parse(savedSettings);
                applySettings();
            }

            const savedTheme = localStorage.getItem('s3wat_theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
            }
        }

        function saveData() {
            localStorage.setItem('s3wat_workouts', JSON.stringify(workouts));
            localStorage.setItem('s3wat_settings', JSON.stringify(userSettings));
        }

        function applySettings() {
            document.getElementById('userName').value = userSettings.name || '';
            document.getElementById('userGender').value = userSettings.gender || 'M';
            document.getElementById('userAge').value = userSettings.age || '';
            document.getElementById('userHeight').value = userSettings.height || '';
            document.getElementById('userWeight').value = userSettings.weight || '';
            document.getElementById('userGoal').value = userSettings.goal || 'grom';
        }

        // ==================== NAVIGATION ====================
        
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'exercises') renderExercises();
            if (tabName === 'workouts') renderWorkouts();
            if (tabName === 'benchmarks') renderBenchmarks();
            if (tabName === 'timer') initTimer();
        }

        // ==================== DASHBOARD ====================
        
        function updateDashboard() {
            const now = Date.now();
            const week = 7 * 24 * 60 * 60 * 1000;
            const month = 30 * 24 * 60 * 60 * 1000;
            
            const weekWorkouts = workouts.filter(w => now - new Date(w.date).getTime() < week).length;
            const monthWorkouts = workouts.filter(w => now - new Date(w.date).getTime() < month).length;
            const totalWorkouts = workouts.length;
            
            // Calculate streak
            let streak = 0;
            const sortedWorkouts = [...workouts].sort((a, b) => new Date(b.date) - new Date(a.date));
            let currentDate = new Date();
            currentDate.setHours(0, 0, 0, 0);
            
            for (let workout of sortedWorkouts) {
                const workoutDate = new Date(workout.date);
                workoutDate.setHours(0, 0, 0, 0);
                const daysDiff = Math.floor((currentDate - workoutDate) / (24 * 60 * 60 * 1000));
                
                if (daysDiff <= streak + 1) {
                    if (daysDiff === streak) {
                        streak++;
                    }
                } else {
                    break;
                }
            }
            
            document.getElementById('weekWorkouts').textContent = weekWorkouts;
            document.getElementById('monthWorkouts').textContent = monthWorkouts;
            document.getElementById('streak').textContent = streak;
            document.getElementById('totalWorkouts').textContent = totalWorkouts;
            
            // Recent workouts
            const recentContainer = document.getElementById('recentWorkouts');
            const recent = sortedWorkouts.slice(0, 5);
            
            if (recent.length === 0) {
                recentContainer.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìù</div><p>Brak trening√≥w. Dodaj sw√≥j pierwszy trening!</p></div>';
            } else {
                recentContainer.innerHTML = recent.map(w => {
                    const date = new Date(w.date);
                    const dateStr = date.toLocaleDateString('pl-PL', { day: '2-digit', month: '2-digit', year: 'numeric' });
                    const stars = '‚òÖ'.repeat(w.rating) + '‚òÜ'.repeat(5 - w.rating);
                    return `
                        <div class="workout-item">
                            <h3>${w.type}</h3>
                            <div class="date">${dateStr} | ${stars}</div>
                            <p>${w.description.substring(0, 100)}${w.description.length > 100 ? '...' : ''}</p>
                        </div>
                    `;
                }).join('');
            }
            
            // Norm progress (placeholder)
            const normContainer = document.getElementById('normProgress');
            normContainer.innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <strong>Bieg 3000m:</strong> 13:45 / 13:40 (cel GROM)
                    <div class="progress-bar"><div class="progress-fill" style="width: 98%"></div></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>PodciƒÖganie:</strong> 8 / 9 (cel GROM)
                    <div class="progress-bar"><div class="progress-fill" style="width: 89%"></div></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <strong>Pompki:</strong> 45 / 48 (cel GROM)
                    <div class="progress-bar"><div class="progress-fill" style="width: 94%"></div></div>
                </div>
                <p style="margin-top: 1rem; color: var(--primary); font-weight: 600;">üí° Aby ≈õledziƒá realny postƒôp, dodawaj treningi z wynikami test√≥w!</p>
            `;
        }

        // ==================== EXERCISES ====================
        
        function renderExercises() {
            filterExercises();
        }

        function filterExercises() {
            const search = document.getElementById('exerciseSearch').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            
            const filtered = exercises.filter(ex => {
                const matchSearch = ex.name.toLowerCase().includes(search) || 
                                  ex.description.toLowerCase().includes(search);
                const matchCategory = !category || ex.category === category;
                return matchSearch && matchCategory;
            });
            
            const container = document.getElementById('exerciseList');
            
            if (filtered.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üîç</div><p>Nie znaleziono ƒáwicze≈Ñ</p></div>';
                return;
            }
            
            container.innerHTML = filtered.map(ex => `
                <div class="exercise-card" onclick='showExerciseDetails(${JSON.stringify(ex).replace(/'/g, "&#39;")})'>
                    <div class="category">${ex.category}</div>
                    <h3>${ex.name}</h3>
                    <p>${ex.description.substring(0, 80)}...</p>
                    ${ex.norms.grom_M ? `<div class="norm-badge">GROM M: ${ex.norms.grom_M}</div>` : ''}
                    ${ex.norms.grom_K ? `<div class="norm-badge">GROM K: ${ex.norms.grom_K}</div>` : ''}
                </div>
            `).join('');
        }

        function showExerciseDetails(exercise) {
            document.getElementById('exerciseModalTitle').textContent = exercise.name;
            
            let normsHTML = '<h3 style="color: var(--primary); margin-top: 1rem;">üìä Normy:</h3><ul>';
            for (let [key, value] of Object.entries(exercise.norms)) {
                const unit = key.replace('grom_', '').replace('jwk_', '').replace('formoza_', '');
                const org = key.includes('grom') ? 'GROM' : key.includes('jwk') ? 'JWK' : 'Formoza';
                normsHTML += `<li><strong>${org} (${unit}):</strong> ${value}</li>`;
            }
            normsHTML += '</ul>';
            
            document.getElementById('exerciseModalContent').innerHTML = `
                <div class="category">${exercise.category}</div>
                <p style="margin: 1rem 0;"><strong>Opis:</strong><br>${exercise.description}</p>
                ${normsHTML}
                <h3 style="color: var(--primary); margin-top: 1rem;">üí° Wskaz√≥wki treningowe:</h3>
                <p>${exercise.tips}</p>
            `;
            
            document.getElementById('exerciseModal').classList.add('active');
        }

        // ==================== TIMER ====================
        
        function initTimer() {
            selectTimerMode('stopwatch');
        }

        function selectTimerMode(mode) {
            currentTimerMode = mode;
            
            document.querySelectorAll('.timer-mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const settingsDiv = document.getElementById('timerSettings');
            
            switch(mode) {
                case 'stopwatch':
                    settingsDiv.innerHTML = '<p style="text-align: center; color: #666;">Klasyczny stoper - mierz swoje czasy!</p>';
                    break;
                case 'fortime':
                    settingsDiv.innerHTML = `
                        <div class="form-group">
                            <label>Czas na wykonanie (minuty):</label>
                            <input type="number" class="input" id="fortimeMinutes" value="5" min="1" max="60">
                        </div>
                        <p style="text-align: center; color: #666;">Wykonaj zadanie w jak najkr√≥tszym czasie!</p>
                    `;
                    break;
                case 'emom':
                    settingsDiv.innerHTML = `
                        <div class="form-group">
                            <label>Liczba rund:</label>
                            <input type="number" class="input" id="emomRounds" value="10" min="1" max="30">
                        </div>
                        <p style="text-align: center; color: #666;">Co minutƒô wykonaj zadane ƒáwiczenie!</p>
                    `;
                    break;
                case 'tabata':
                    settingsDiv.innerHTML = `
                        <div class="form-group">
                            <label>Praca (sekundy):</label>
                            <input type="number" class="input" id="tabataWork" value="20" min="10" max="60">
                        </div>
                        <div class="form-group">
                            <label>Odpoczynek (sekundy):</label>
                            <input type="number" class="input" id="tabataRest" value="10" min="5" max="60">
                        </div>
                        <div class="form-group">
                            <label>Liczba rund:</label>
                            <input type="number" class="input" id="tabataRounds" value="8" min="1" max="20">
                        </div>
                    `;
                    break;
                case 'amrap':
                    settingsDiv.innerHTML = `
                        <div class="form-group">
                            <label>Czas treningu (minuty):</label>
                            <input type="number" class="input" id="amrapMinutes" value="10" min="1" max="60">
                        </div>
                        <p style="text-align: center; color: #666;">Wykonaj jak najwiƒôcej rund w danym czasie!</p>
                    `;
                    break;
            }
            
            resetTimer();
        }

        function startTimer() {
            if (timerInterval) return;
            
            timerPaused = false;
            
            timerInterval = setInterval(() => {
                if (!timerPaused) {
                    timerSeconds++;
                    updateTimerDisplay();
                }
            }, 1000);
            
            document.getElementById('timerStartBtn').textContent = '‚ñ∂Ô∏è W trakcie...';
            document.getElementById('timerStartBtn').disabled = true;
        }

        function pauseTimer() {
            timerPaused = !timerPaused;
            event.target.textContent = timerPaused ? '‚ñ∂Ô∏è Wzn√≥w' : '‚è∏Ô∏è Pauza';
        }

        function resetTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            timerSeconds = 0;
            timerPaused = false;
            timerLaps = [];
            updateTimerDisplay();
            document.getElementById('timerStartBtn').textContent = '‚ñ∂Ô∏è Start';
            document.getElementById('timerStartBtn').disabled = false;
            document.getElementById('timerLaps').innerHTML = '';
        }

        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            
            const display = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
        }

        // ==================== WORKOUTS ====================
        
        function showAddWorkout() {
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('workoutDateTime').value = localDateTime;
            document.getElementById('workoutType').value = 'Mieszany';
            document.getElementById('workoutDescription').value = '';
            document.getElementById('workoutNotes').value = '';
            currentWorkoutRating = 0;
            updateRatingDisplay();
            document.getElementById('addWorkoutModal').classList.add('active');
        }

        function setRating(rating) {
            currentWorkoutRating = rating;
            updateRatingDisplay();
        }

        function updateRatingDisplay() {
            const stars = document.querySelectorAll('#workoutRating .star');
            stars.forEach((star, index) => {
                if (index < currentWorkoutRating) {
                    star.classList.add('filled');
                } else {
                    star.classList.remove('filled');
                }
            });
        }

        function saveWorkout() {
            const dateTime = document.getElementById('workoutDateTime').value;
            const type = document.getElementById('workoutType').value;
            const description = document.getElementById('workoutDescription').value;
            const notes = document.getElementById('workoutNotes').value;
            
            if (!dateTime || !description) {
                alert('‚ö†Ô∏è Wype≈Çnij datƒô i opis treningu!');
                return;
            }
            
            const workout = {
                id: Date.now(),
                date: dateTime,
                type: type,
                description: description,
                rating: currentWorkoutRating,
                notes: notes
            };
            
            workouts.unshift(workout);
            saveData();
            closeModal('addWorkoutModal');
            
            showAlert('success', '‚úÖ Trening zapisany pomy≈õlnie!');
            
            if (document.getElementById('workouts').classList.contains('active')) {
                renderWorkouts();
            }
            updateDashboard();
        }

        function renderWorkouts() {
            const container = document.getElementById('workoutList');
            
            if (workouts.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üìù</div><p>Brak zapisanych trening√≥w.<br>Dodaj sw√≥j pierwszy trening przyciskiem "+"!</p></div>';
                return;
            }
            
            container.innerHTML = workouts.map(w => {
                const date = new Date(w.date);
                const dateStr = date.toLocaleDateString('pl-PL', { 
                    day: '2-digit', 
                    month: 'long', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                const stars = '‚òÖ'.repeat(w.rating) + '‚òÜ'.repeat(5 - w.rating);
                
                return `
                    <div class="workout-item">
                        <h3>${w.type}</h3>
                        <div class="date">${dateStr}</div>
                        <div style="color: #f39c12; margin: 0.5rem 0;">${stars}</div>
                        <p><strong>Opis:</strong><br>${w.description}</p>
                        ${w.notes ? `<p><strong>Notatki:</strong><br>${w.notes}</p>` : ''}
                        <button class="btn btn-small btn-secondary" onclick="deleteWorkout(${w.id})">üóëÔ∏è Usu≈Ñ</button>
                    </div>
                `;
            }).join('');
        }

        function deleteWorkout(id) {
            if (confirm('Czy na pewno chcesz usunƒÖƒá ten trening?')) {
                workouts = workouts.filter(w => w.id !== id);
                saveData();
                renderWorkouts();
                updateDashboard();
                showAlert('success', '‚úÖ Trening usuniƒôty');
            }
        }

        // ==================== CALCULATOR ====================
        
        function calculateNorms() {
            const unit = document.getElementById('unitSelect').value;
            const gender = document.getElementById('genderSelect').value;
            
            const run3000 = document.getElementById('run3000').value;
            const pullups = parseInt(document.getElementById('pullups').value) || 0;
            const situps = parseInt(document.getElementById('situps').value) || 0;
            const pushups = parseInt(document.getElementById('pushups').value) || 0;
            const shuttle = parseFloat(document.getElementById('shuttle').value) || 0;
            
            if (!run3000 || pullups === 0 || situps === 0 || pushups === 0 || shuttle === 0) {
                alert('‚ö†Ô∏è Wype≈Çnij wszystkie pola!');
                return;
            }
            
            // Parse run time (mm:ss)
            const runParts = run3000.split(':');
            const runMinutes = parseInt(runParts[0]) || 0;
            const runSeconds = parseInt(runParts[1]) || 0;
            const runTotalSeconds = runMinutes * 60 + runSeconds;
            
            // GROM norms (simplified scoring)
            let score = 0;
            let maxScore = 500;
            let feedback = [];
            
            // Run 3000m (100 points max)
            const runTarget = gender === 'M' ? 13 * 60 + 40 : 15 * 60 + 30;
            if (runTotalSeconds <= runTarget) {
                score += 100;
                feedback.push('‚úÖ Bieg 3000m: ZALICZONY');
            } else {
                const diff = runTotalSeconds - runTarget;
                const points = Math.max(0, 100 - diff * 2);
                score += points;
                feedback.push(`‚ö†Ô∏è Bieg 3000m: ${Math.round(points)}pkt (cel: ${Math.floor(runTarget/60)}:${String(runTarget%60).padStart(2, '0')})`);
            }
            
            // Pull-ups (100 points max)
            const pullupTarget = gender === 'M' ? 9 : 5;
            if (pullups >= pullupTarget) {
                score += 100;
                feedback.push('‚úÖ PodciƒÖganie: ZALICZONY');
            } else {
                const points = Math.round((pullups / pullupTarget) * 100);
                score += points;
                feedback.push(`‚ö†Ô∏è PodciƒÖganie: ${points}pkt (masz ${pullups}, cel: ${pullupTarget})`);
            }
            
            // Sit-ups (100 points max)
            const situpsTarget = gender === 'M' ? 65 : 55;
            if (situps >= situpsTarget) {
                score += 100;
                feedback.push('‚úÖ Sk≈Çony tu≈Çowia: ZALICZONY');
            } else {
                const points = Math.round((situps / situpsTarget) * 100);
                score += points;
                feedback.push(`‚ö†Ô∏è Sk≈Çony tu≈Çowia: ${points}pkt (masz ${situps}, cel: ${situpsTarget})`);
            }
            
            // Push-ups (100 points max)
            const pushupsTarget = gender === 'M' ? 48 : 30;
            if (pushups >= pushupsTarget) {
                score += 100;
                feedback.push('‚úÖ Pompki: ZALICZONY');
            } else {
                const points = Math.round((pushups / pushupsTarget) * 100);
                score += points;
                feedback.push(`‚ö†Ô∏è Pompki: ${points}pkt (masz ${pushups}, cel: ${pushupsTarget})`);
            }
            
            // Shuttle run (100 points max)
            const shuttleTarget = gender === 'M' ? 30.8 : 32.3;
            if (shuttle <= shuttleTarget) {
                score += 100;
                feedback.push('‚úÖ Bieg wahad≈Çowy: ZALICZONY');
            } else {
                const diff = shuttle - shuttleTarget;
                const points = Math.max(0, 100 - diff * 10);
                score += points;
                feedback.push(`‚ö†Ô∏è Bieg wahad≈Çowy: ${Math.round(points)}pkt (masz ${shuttle}s, cel: ${shuttleTarget}s)`);
            }
            
            const percentage = Math.round((score / maxScore) * 100);
            
            let resultClass = '';
            let resultText = '';
            
            if (percentage >= 90) {
                resultClass = 'success';
                resultText = 'üèÜ ELITA - Doskona≈Ça forma! Gotowy na selekcjƒô!';
            } else if (percentage >= 75) {
                resultClass = 'success';
                resultText = 'üí™ BARDZO DOBRY - Blisko celu, kontynuuj trening!';
            } else if (percentage >= 60) {
                resultClass = 'warning';
                resultText = '‚ö†Ô∏è DOBRY - Wymaga poprawy w kilku obszarach';
            } else {
                resultClass = 'danger';
                resultText = '‚ùå DO POPRAWY - Skoncentruj siƒô na s≈Çabszych punktach';
            }
            
            document.getElementById('calculatorResult').innerHTML = `
                <div class="calculator-result">
                    <div class="score">${score} / ${maxScore}</div>
                    <div class="label">${percentage}% normy ${unit.toUpperCase()}</div>
                </div>
                <div class="alert alert-${resultClass}" style="margin-top: 1rem;">
                    <strong>${resultText}</strong>
                </div>
                <div class="card" style="margin-top: 1rem; background: var(--card-bg);">
                    <h3 style="color: var(--primary);">üìä Szczeg√≥≈Çowa ocena:</h3>
                    <ul style="line-height: 2;">
                        ${feedback.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        // ==================== BENCHMARKS ====================
        
        function renderBenchmarks() {
            const container = document.getElementById('benchmarksList');
            
            container.innerHTML = `
                <div class="benchmark-group">
                    <h3>üéñÔ∏è GROM (Grupa Reagowania Operacyjno-Manewrowego)</h3>
                    <p><strong>Wymagania minimalne (8 losowych z 12 konkurencji):</strong></p>
                    <table class="benchmark-table">
                        <thead>
                            <tr>
                                <th>Konkurencja</th>
                                <th>Mƒô≈ºczy≈∫ni</th>
                                <th>Kobiety</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Bieg 3000m</td><td>&lt; 13:40</td><td>&lt; 15:30</td></tr>
                            <tr><td>PodciƒÖganie na drƒÖ≈ºku</td><td>‚â• 9</td><td>‚â• 5</td></tr>
                            <tr><td>Sk≈Çony tu≈Çowia 2min</td><td>‚â• 65</td><td>‚â• 55</td></tr>
                            <tr><td>Pompki ciƒÖg≈Çe</td><td>‚â• 48</td><td>‚â• 30</td></tr>
                            <tr><td>Bieg wahad≈Çowy 10√ó10m</td><td>&lt; 30.8s</td><td>&lt; 32.3s</td></tr>
                            <tr><td>Wios≈Çowanie 500m</td><td>&lt; 1:50</td><td>&lt; 2:00</td></tr>
                            <tr><td>Uginanie na porƒôczach</td><td>‚â• 10</td><td>‚â• 6</td></tr>
                            <tr><td>P≈Çywanie 100m</td><td>&lt; 1:45</td><td>&lt; 2:00</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="benchmark-group">
                    <h3>‚öîÔ∏è JWK Lubliniec (Jednostka Wojskowa Komandos√≥w)</h3>
                    <p><strong>Wymagania minimalne:</strong></p>
                    <table class="benchmark-table">
                        <thead>
                            <tr>
                                <th>Konkurencja</th>
                                <th>Mƒô≈ºczy≈∫ni</th>
                                <th>Kobiety</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Bieg 3000m</td><td>&lt; 14:00</td><td>&lt; 16:00</td></tr>
                            <tr><td>PodciƒÖganie na drƒÖ≈ºku</td><td>‚â• 8</td><td>‚â• 4</td></tr>
                            <tr><td>Sk≈Çony tu≈Çowia 2min</td><td>‚â• 60</td><td>‚â• 50</td></tr>
                            <tr><td>Pompki ciƒÖg≈Çe</td><td>‚â• 45</td><td>‚â• 28</td></tr>
                            <tr><td>Bieg wahad≈Çowy 10√ó10m</td><td>&lt; 31.5s</td><td>&lt; 33.0s</td></tr>
                            <tr><td>Marsz 15km z plecakiem (15kg)</td><td>&lt; 3h</td><td>&lt; 3h 30min</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="benchmark-group">
                    <h3>üåä Formoza (Jednostka Specjalna Komandos√≥w)</h3>
                    <p><strong>Wymagania minimalne (+ testy p≈Çywackie):</strong></p>
                    <table class="benchmark-table">
                        <thead>
                            <tr>
                                <th>Konkurencja</th>
                                <th>Mƒô≈ºczy≈∫ni</th>
                                <th>Kobiety</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Bieg 3000m</td><td>&lt; 13:50</td><td>&lt; 15:45</td></tr>
                            <tr><td>PodciƒÖganie na drƒÖ≈ºku</td><td>‚â• 9</td><td>‚â• 5</td></tr>
                            <tr><td>Pompki ciƒÖg≈Çe</td><td>‚â• 48</td><td>‚â• 30</td></tr>
                            <tr><td>P≈Çywanie 200m dowolnym stylem</td><td>&lt; 4:00</td><td>&lt; 4:30</td></tr>
                            <tr><td>P≈Çywanie 25m pod wodƒÖ</td><td>‚úì</td><td>‚úì</td></tr>
                            <tr><td>Nurkowanie na 3m (podniesienie przedmiotu)</td><td>‚úì</td><td>‚úì</td></tr>
                        </tbody>
                    </table>
                </div>

                <div class="alert" style="background: var(--primary); color: white; margin-top: 2rem;">
                    <strong>üí° Wskaz√≥wka:</strong> Normy przedstawiajƒÖ minimalne wymagania. Rekomenduje siƒô osiƒÖgniƒôcie wynik√≥w 10-15% lepszych ni≈º minimum, aby zwiƒôkszyƒá szanse powodzenia w selekcji.
                </div>
            `;
        }

        // ==================== PLANS ====================
        
        function generatePlan() {
            const goal = document.getElementById('planGoal').value;
            const duration = parseInt(document.getElementById('planDuration').value);
            const days = parseInt(document.getElementById('planDays').value);
            const equipment = document.getElementById('planEquipment').value;
            
            let goalText = '';
            switch(goal) {
                case 'grom': goalText = 'Selekcja GROM'; break;
                case 'jwk': goalText = 'Selekcja JWK'; break;
                case 'formoza': goalText = 'Selekcja Formoza'; break;
                case 'general': goalText = 'Poprawa og√≥lnej sprawno≈õci'; break;
            }
            
            const container = document.getElementById('generatedPlan');
            
            // Sample plan structure
            let planHTML = `
                <div class="card" style="margin-top: 1.5rem; background: linear-gradient(135deg, var(--primary), var(--primary-light)); color: white;">
                    <h2 style="color: white;">üìã Tw√≥j Plan Treningowy</h2>
                    <p><strong>Cel:</strong> ${goalText}</p>
                    <p><strong>D≈Çugo≈õƒá:</strong> ${duration} tygodni</p>
                    <p><strong>Czƒôstotliwo≈õƒá:</strong> ${days} dni/tydzie≈Ñ</p>
                    <p><strong>Sprzƒôt:</strong> ${equipment}</p>
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <h3 style="color: var(--primary);">üìÖ Przyk≈Çadowy Tydzie≈Ñ 1-2 (Faza budowania bazy)</h3>
                    
                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--accent); border-radius: 8px;">
                        <h4>Dzie≈Ñ 1: Si≈Ça g√≥rne partie + Core</h4>
                        <ul>
                            <li>Rozgrzewka: 5min skakanka + mobilno≈õƒá</li>
                            <li>PodciƒÖganie: 5 x max powt√≥rze≈Ñ (odpoczynek 2min)</li>
                            <li>Pompki: 5 x max powt√≥rze≈Ñ</li>
                            <li>Dipy: 4 x 8-12</li>
                            <li>Plank: 3 x 60s</li>
                            <li>Hollow hold: 3 x 30s</li>
                        </ul>
                    </div>

                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--success); border-radius: 8px;">
                        <h4>Dzie≈Ñ 2: Wytrzyma≈Ço≈õƒá + Nogi</h4>
                        <ul>
                            <li>Rozgrzewka: 10min jogging</li>
                            <li>Bieg interwa≈Çy: 6 x 400m (tempo 90% max, odpoczynek 2min)</li>
                            <li>Przysiady z pi≈ÇkƒÖ: 3 x 30</li>
                            <li>Wyskoki na skrzyniƒô: 4 x 10</li>
                            <li>Lunges walking: 3 x 20 (10 ka≈ºdƒÖ nogƒÖ)</li>
                        </ul>
                    </div>

                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--warning); border-radius: 8px;">
                        <h4>Dzie≈Ñ 3: CrossFit WOD / Conditioning</h4>
                        <ul>
                            <li>Rozgrzewka: 5min AMRAP (5 burpees, 10 air squats, 15 jumping jacks)</li>
                            <li>WOD: 21-15-9 (Thrusters 20kg, Pull-ups, Burpees) - For Time</li>
                            <li>Finisher: 100 wall balls</li>
                            <li>Cool down: stretching 10min</li>
                        </ul>
                    </div>

                    ${days >= 4 ? `
                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--primary); border-radius: 8px;">
                        <h4>Dzie≈Ñ 4: D≈Çugi bieg + Core</h4>
                        <ul>
                            <li>Bieg ciƒÖg≈Çy: ${duration >= 8 ? '8-10km' : '5-7km'} w tempie konwersacyjnym</li>
                            <li>Po biegu: sk≈Çony tu≈Çowia 3 x max (2min)</li>
                            <li>Leg raises: 3 x 15</li>
                            <li>Russian twists: 3 x 30</li>
                        </ul>
                    </div>
                    ` : ''}

                    ${days >= 5 ? `
                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--accent); border-radius: 8px;">
                        <h4>Dzie≈Ñ 5: Si≈Ça dolne partie + Mobilno≈õƒá</h4>
                        <ul>
                            <li>Przysiad ze sztangƒÖ: 5 x 5 (ciƒô≈ºki)</li>
                            <li>Martwy ciƒÖg: 4 x 6</li>
                            <li>Bulgarian split squats: 3 x 10 ka≈ºdƒÖ nogƒÖ</li>
                            <li>Farmer's walk: 4 x 50m</li>
                            <li>Mobilno≈õƒá bioder i kostek: 15min</li>
                        </ul>
                    </div>
                    ` : ''}

                    ${days >= 6 ? `
                    <div style="margin: 1rem 0; padding: 1rem; background: var(--light-bg); border-left: 4px solid var(--success); border-radius: 8px;">
                        <h4>Dzie≈Ñ 6: Aktywna regeneracja</h4>
                        <ul>
                            <li>Lekki jogging: 3-5km (zona 1-2)</li>
                            <li>P≈Çywanie: 20min technika</li>
                            <li>Yoga/stretching: 30min</li>
                            <li>Foam rolling: 15min</li>
                        </ul>
                    </div>
                    ` : ''}
                </div>

                <div class="card" style="margin-top: 1rem;">
                    <h3 style="color: var(--primary);">üìà Progresja treningu</h3>
                    <ul style="line-height: 2;">
                        <li><strong>Tydzie≈Ñ 1-${Math.ceil(duration/3)}:</strong> Budowanie bazy, adaptacja objƒôto≈õci, technika</li>
                        <li><strong>Tydzie≈Ñ ${Math.ceil(duration/3)+1}-${Math.ceil(duration*2/3)}:</strong> Zwiƒôkszanie intensywno≈õci, specyficzne testy</li>
                        ${duration >= 8 ? `<li><strong>Tydzie≈Ñ ${Math.ceil(duration*2/3)+1}-${duration-2}:</strong> Peak phase - maksymalna intensywno≈õƒá</li>` : ''}
                        <li><strong>Ostatnie 1-2 tygodnie:</strong> Deload + taper przed selekcjƒÖ</li>
                    </ul>
                </div>

                <div class="alert alert-warning" style="margin-top: 1rem;">
                    <strong>‚ö†Ô∏è Uwaga:</strong> To przyk≈Çadowy plan. Dostosuj objƒôto≈õƒá i intensywno≈õƒá do swojego poziomu. Regularnie testuj siƒô w normach GROM/JWK. W razie kontuzji - przerwij i skonsultuj siƒô z lekarzem.
                </div>

                <div class="card" style="margin-top: 1rem; background: var(--success); color: white;">
                    <h3 style="color: white;">üéØ Klucz do sukcesu</h3>
                    <ul style="line-height: 2;">
                        <li>‚úÖ <strong>Konsekwencja</strong> - nie opuszczaj trening√≥w</li>
                        <li>‚úÖ <strong>Regeneracja</strong> - 7-8h snu, od≈ºywianie, stretching</li>
                        <li>‚úÖ <strong>Tracking</strong> - zapisuj ka≈ºdy trening w tej aplikacji</li>
                        <li>‚úÖ <strong>Testy</strong> - co 2 tygodnie sprawdzaj postƒôpy w normach</li>
                        <li>‚úÖ <strong>Mental</strong> - trenuj r√≥wnie≈º odporno≈õƒá psychicznƒÖ</li>
                    </ul>
                </div>
            `;
            
            container.innerHTML = planHTML;
        }

        // ==================== SETTINGS & MODALS ====================
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('s3wat_theme', isDark ? 'dark' : 'light');
        }

        function showSettings() {
            applySettings();
            document.getElementById('settingsModal').classList.add('active');
        }

        function saveSettings() {
            userSettings.name = document.getElementById('userName').value;
            userSettings.gender = document.getElementById('userGender').value;
            userSettings.age = parseInt(document.getElementById('userAge').value) || 0;
            userSettings.height = parseInt(document.getElementById('userHeight').value) || 0;
            userSettings.weight = parseInt(document.getElementById('userWeight').value) || 0;
            userSettings.goal = document.getElementById('userGoal').value;
            
            saveData();
            closeModal('settingsModal');
            showAlert('success', '‚úÖ Ustawienia zapisane!');
        }

        function exportData() {
            const data = {
                version: '1.0',
                exported: new Date().toISOString(),
                settings: userSettings,
                workouts: workouts
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `s3wat_backup_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('success', '‚úÖ Dane wyeksportowane!');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.settings) userSettings = data.settings;
                    if (data.workouts) workouts = data.workouts;
                    
                    saveData();
                    applySettings();
                    updateDashboard();
                    showAlert('success', '‚úÖ Dane zaimportowane pomy≈õlnie!');
                } catch (error) {
                    showAlert('danger', '‚ùå B≈ÇƒÖd importu: nieprawid≈Çowy plik!');
                }
            };
            reader.readAsText(file);
        }

        function resetApp() {
            if (confirm('‚ö†Ô∏è UWAGA! To usunie wszystkie dane (treningi, ustawienia). Czy na pewno?')) {
                if (confirm('Ostatnia szansa! Czy naprawdƒô chcesz zresetowaƒá aplikacjƒô?')) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '80px';
            alertDiv.style.left = '50%';
            alertDiv.style.transform = 'translateX(-50%)';
            alertDiv.style.zIndex = '10000';
            alertDiv.style.minWidth = '300px';
            alertDiv.style.animation = 'fadeIn 0.3s';
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.style.animation = 'fadeOut 0.3s';
                setTimeout(() => alertDiv.remove(), 300);
            }, 3000);
        }

        // ==================== INITIALIZATION ====================
        
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateDashboard();
            renderExercises();
            
            // Close modals on background click
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                    }
                });
            });

            // Install PWA prompt
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                
                // Show install button after 10 seconds
                setTimeout(() => {
                    if (deferredPrompt && !window.matchMedia('(display-mode: standalone)').matches) {
                        if (confirm('üì± Zainstaluj S3 WAT Training Hub jako aplikacjƒô na telefon?')) {
                            deferredPrompt.prompt();
                            deferredPrompt.userChoice.then((choiceResult) => {
                                deferredPrompt = null;
                            });
                        }
                    }
                }, 10000);
            });
        });

        // Service Worker registration (for PWA offline support)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript,console.log("SW registered")').catch(() => {});
        }
    </script>
</body>
</html>